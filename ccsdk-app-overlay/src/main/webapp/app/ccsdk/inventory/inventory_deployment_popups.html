<script type="text/ng-template" id="inventory_deployment_execute_popup.html">

	<style>
	.ecd-parameter-table
	{
	    border:   0px;
    	overflow: auto;
	}
	.ecd-parameter-table th 
	{
		font-size: 1.4rem;
	}
	</style>

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

		<div class="row-nowrap">
			<div class="span12">
				<div class="form-row">
					<label for="blueprintId">Deployment ID</label>
					<div class="field-group">
						<!--autofocus is HTML5 attribute; doesn't work in Firefox-->
						<input id="blueprintId" class="span12" type="text" data-ng-model="ecdapp.editRequest.deployment_id" autofocus/>
					</div>
				</div>
			</div> 
			<div class="span12">
				<div class="form-row">
					<label for="allowCustom">&nbsp;</label>
					<div class="field-group">
	                	<label for="allowCustomParameters" class="checkbox">
    	                	<input id="allowCustomParameters" type="checkbox" ng-model="ecdapp.editRequest.allow_custom_parameter" />
							<i class="skin"></i><span>Allow Custom Parameters</span>
            	    	</label>
					</div>
				</div>
			</div> 
		</div>			
			
		<div class="row-nowrap">
			<div class="span12">
				<div class="form-row">
					<label for="workflowName">Workflow Name</label>
					<div class="field-group">
						<select b2b-dropdown id="workflowName" name="workflowName" ng-model="ecdapp.editRequest.workflow_name.value" ng-change="selectWorkflowName()">
							<option b2b-dropdown-list option-repeat="w in ecdapp.editRequest.workflow_list" value="{{w}}">
								{{w}}
							</option>
						</select>
					</div>
				</div>			
			</div>
			<div class="span12">
				<div class="form-row">
					<label for="force">&nbsp;</label>
					<div class="field-group">
	                	<label for="force" class="checkbox">
    	                	<input id="force" type="checkbox" ng-model="ecdapp.editRequest.force" />
							<i class="skin"></i><span>Force</span>
            	    	</label>
					</div>
				</div>
			</div> 
		</div>

		<div class="row-nowrap">
			<div class="span12">
				<div class="form-row">
					<label for="parameters">*Parameters</label>
    				<div b2b-file-drop file-model="ecdapp.editRequest.fileModel" on-drop="handleFileSelect()" align="center">
	    					<span b2b-file-link file-model="ecdapp.editRequest.fileModel" on-file-select="handleFileSelect()" >
    						Drag &amp; drop a parameters YAML file here, or click to browse.
    						</span>
			        </div>
		        </div>
				<div class="ecd-parameter-table">
					<table id="parameters">
						<tr id="ecd-table-header">
							<th width="40%">Name</th>
							<th width="60%">Value</th>
						</tr>
		            	<tbody ng-repeat="(pkey, pval) in ecdapp.editRequest.parmFileDict">
							<tr id="tr-rowData">
								<td ng-bind="pkey"/>
								<td><input id="parameterValue" class="span12" type="text" data-ng-model="ecdapp.editRequest.parmFileDict[pkey]" autofocus/></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

	</div>

	<div class="b2b-modal-footer ng-scope ng-isolate-scope">
		<div class="cta-button-group in">
			<button class="btn btn-alt btn-small" type="button"
					ng-click="ecdapp.executeDeployment(ecdapp.editRequest);">
				Save
			</button>
			<button class="btn btn-small" type="button"
				ng-click="$dismiss('cancel')">
				Cancel
			</button>
		</div>
	</div>

</script>

<script type="text/ng-template" id="inventory_deployment_delete_popup.html">
	

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

		<div ng-hide="ecdapp.errMsg">
			<div class="row-nowrap" style="margin-bottom:10px; margin-left:10px;"">
				<div class="span6">
					<label for="tenant">Tenant</label>
					<!--not editable-->
					<input id="tenant" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.ui_tenant"/>
				</div>
			</div>
		</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">
 
		<div class="span12">
			<div class="form-row">					
				<div class="field-group">
					<label>
						Undeploy the deployment with ID '{{ecdapp.deploymentRef}}'?
					</label>
				</div>
			</div>
		</div>
	</div>

	<div class="b2b-modal-footer ng-scope ng-isolate-scope">
		<div class="cta-button-group in">
			<button class="btn btn-alt btn-small" type="button"
					ng-click="ecdapp.deleteDeploymentById(deployment);">
				Undeploy
			</button>
			<button class="btn btn-small" type="button"
				ng-click="$dismiss('cancel')">
				Cancel
			</button>
		</div>
	</div>

</script>

<script type="text/ng-template" id="inventory_deployment_inputs_view_popup.html">

	<style>
	.ecd-parameter-table
	{
	    border:   1px;
    	overflow: auto;
	}
	.ecd-parameter-table th 
	{
		font-size: 1.4rem;
	}
	</style>

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.isDataLoading">
			<div class="span" style="margin-bottom:20px;">
    			<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    		Please wait while the content loads.
	    	</div>
		</div>

		<div ng-show="ecdapp.errMsg">
			<span class="ecd-error-message">{{ecdapp.errMsg}}</span>
		</div>
			
		<div ng-hide="ecdapp.errMsg">
			<div class="row-nowrap" style="margin-bottom:10px;">
				<div class="span6">
					<label for="tenant">Tenant</label>
					<!--not editable-->
					<input id="tenant" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.ui_tenant"/>
				</div>
			</div>
		</div>
	
		<div ng-hide="ecdapp.errMsg">
			<div class="row-nowrap">
				<div class="span12">
					<label for="deploymentRef">Deployment Ref</label>
					<!--not editable-->
					<input id="deploymentRef" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.deploymentRef"/>
				</div>
				<div class="span12">
					<label for="serviceId">Service ID</label>
					<!--not editable-->
					<input id="serviceId" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.serviceId"/>
				</div> 
			</div>			
			
			<div class="row-nowrap">
				<div class="span12">
					<table id="parameters">
						<tr id="ecd-table-header">
							<th width="40%">Name</th>
							<th width="60%">Value</th>
						</tr>
	            		<tbody ng-repeat="(pkey, pval) in ecdapp.deployment.inputs">
							<tr id="tr-rowData">
								<td ng-bind="pkey"/>
								<td ng-bind="pval"/>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</script>
<script type="text/ng-template" id="inventory_deployment_update_popup.html">

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

		<div ng-show="ecdapp.errMsg">
			<span class="ecd-error-message">{{ecdapp.errMsg}}</span>
		</div>

		<div class="row-nowrap">
			<div class="span12">
				<label for="deploymentRef">Deployment Ref</label>
				<input id="deploymentRef" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.deploymentRef"/>
			</div>
			<div class="span12">
				<label for="tenantName">Tenant Name</label>
					<!--not editable-->
				<input id="tenantName" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.ui_tenant"/>
			</div>
		</div>

		<div ng-hide="ecdapp.isDataLoading" style="margin-top:20px;">
	    	<div 
	    		b2b-table 
	    		id="service-type-table"
	    		class="b2b-table-div" 
	    		table-data="ecdapp.bp" >
		        <table>    
		            <thead b2b-table-row type="header">	
						<tr id="th-header-row">
							<th b2b-table-header>Blueprint Name</th>
							<th b2b-table-header>Blueprint Version</th>
							<th b2b-table-header>Type ID</th>
							<th b2b-table-header>Description</th>
				  			<th b2b-table-header sortable="false"><i class="icon-controls-gear ecd-icon-display"></i></th>
						</tr>
					</thead>					
		            <tbody b2b-table-row type="body" row-repeat="rowData in ecdapp.bp">
						<tr id="tr-rowData">
							<td b2b-table-body
								ng-bind="rowData.typeName"/>
							<td b2b-table-body
								ng-bind="rowData.typeVersion"/>
							<td b2b-table-body
								ng-bind="rowData.typeId"/>
							<td b2b-table-body
								ng-bind="rowData.blueprintDescription"/>
							<td b2b-table-body>
							<div class="form-row">
	               				<label for="bpCb{{index}}" class="checkbox">
   	                			<input id="bpCb{{index}}" type="checkbox" ng-model="rowData.checked" ng-click="ecdapp.updateSelection(rowData.typeId)" />
								<i class="skin"></i>
                				</label>
							</div>
					     	</td>
						</tr>
					</tbody>
				</table>
			</div> 
		</div>
		<div ng-hide="ecdapp.isDataLoading" class="row-nowrap" style="margin-top:20px;">
			<div class="span12">
				<label for="typeID">Blueprint[Service Type] ID</label>
				<input id="typeID" class="span12" type="text" data-ng-model="ecdapp.typeId" title="ID of the blueprint to use for the update"/>
			</div>
			<div class="cta-button-group in">
				<button class="btn btn-alt btn-small" type="button"
					ng-click="ecdapp.getBlueprint()">
					Get Blueprint data
				</button>
			</div>
		</div>

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.isDataLoading">
			<div class="span" style="margin-bottom:20px;">
    		<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    	Please wait while the content loads.
	    	</div>
		</div>

		<div ng-hide="ecdapp.isDataLoading" class="row-nowrap">
			<div class="span12">
				<div class="form-row">
					<label for="parameters">*Parameters</label>
   					<div b2b-file-drop file-model="ecdapp.editRequest.fileModel" on-drop="handleFileSelect()" align="center">
    						<span b2b-file-link file-model="ecdapp.editRequest.fileModel" on-file-select="handleFileSelect()" >
    						Drag &amp; drop a parameters JSON file here, or click to browse.
   							</span>
			        </div>
		        </div>
				<div class="ecd-parameter-table">
					<table id="parameters">
						<tr id="ecd-table-header">
							<th width="40%">Name</th>
							<th width="60%">Value</th>
						</tr>
	            		<tbody ng-repeat="(pkey, pval) in ecdapp.editRequest.parmFileDict">
							<tr id="tr-rowData">
								<td ng-bind="pkey"/>
								<td><input id="parameterValue" class="span12" type="text" data-ng-model="ecdapp.editRequest.parmFileDict[pkey]" autofocus/></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.deploymentInProgress">
			<div class="span" style="margin-bottom:20px;">
    		<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    	Please wait while the task completes.
	    	</div>
		</div>

		<div class="b2b-modal-footer ng-scope ng-isolate-scope">
			<div class="cta-button-group in" ng-hide="ecdapp.deploymentInProgress">
			<button class="btn btn-alt btn-small" type="button"
					ng-click="ecdapp.updateDeployment(ecdapp.editRequest)" ng-show="!ecdapp.isDataLoading && !ecdapp.errMsg">
					Update
			</button>
			<button class="btn btn-alt btn-small" type="button"
					ng-click="$dismiss('cancel');">
				Close
			</button>
			</div>
		</div>

</script>
<script type="text/ng-template" id="blueprint_data_view_popup.html">

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.isDataLoading">
			<div class="span" style="margin-bottom:20px;">
    			<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    		Please wait while the content loads.
	    	</div>
		</div>

		<div ng-show="ecdapp.errMsg">
			<span class="ecd-error-message">{{ecdapp.errMsg}}</span>
		</div>

			<div class="row-nowrap">
			<div class="span12">
				<label for="typeName">Blueprint Name</label>
				<!--not editable-->
				<input id="typeName" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.typeName"/>
			</div>
			</div>
		<div ng-hide="ecdapp.errMsg">
			<pre>{{ecdapp.blueprint}}</pre>
		</div>

	</div>

	<div class="b2b-modal-footer ng-scope ng-isolate-scope">
		<div class="cta-button-group in">
			<button class="btn btn-alt btn-small" type="button"
					ng-click="$dismiss('cancel');">
				Close
			</button>
		</div>
	</div>

</script>

<script type="text/ng-template" id="inventory_deployment_rollback_popup.html">

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.isDataLoading">
			<div class="span" style="margin-bottom:20px;">
    			<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    		Please wait while the content loads.
	    	</div>
		</div>

		<div ng-show="ecdapp.errMsg">
			<span class="ecd-error-message">{{ecdapp.errMsg}}</span>
		</div>

		<div ng-hide="ecdapp.errMsg">
			<div class="row-nowrap">
				<div class="span12">
					<label for="deploymentRef">Deployment Ref</label>
					<!--not editable-->
					<input id="deploymentRef" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.deploymentRef"/>
				</div>
				<div class="span12">
					<label for="serviceId">Service ID</label>
					<!--not editable-->
					<input id="serviceId" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.serviceId"/>
				</div> 
				<div class="span12">
					<label for="tenantName">Tenant Name</label>
					<!--not editable-->
					<input id="tenantName" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.ui_tenant"/>
				</div> 
			</div>			

		<div ng-hide="ecdapp.isDataLoading">
	    	<div 
	    		b2b-table 
	    		id="revisions-table"
	    		class="b2b-table-div" 
	    		table-data="ecdapp.local_revisions" >
		        <table>    
		            <thead b2b-table-row type="header">	
						<tr id="th-header-row">
							<th b2b-table-header>Revision</th>
							<th b2b-table-header>Updated</th>
							<th b2b-table-header>Status</th>
							<th b2b-table-header>Chart</th>
							<th b2b-table-header>Description</th>
				  			<th b2b-table-header sortable="false"><i class="icon-controls-gear ecd-icon-display"></i></th>
						</tr>
					</thead>
					
		            <tbody b2b-table-row type="body" row-repeat="rowData in ecdapp.local_revisions">
						<tr id="tr-rowData">
							<td b2b-table-body
								ng-bind="rowData.revision"/>
							<td b2b-table-body
								ng-bind="rowData.updated"/>
							<td b2b-table-body
								ng-bind="rowData.status"/>
							<td b2b-table-body
								ng-bind="rowData.chart"/>
							<td b2b-table-body
								ng-bind="rowData.description"/>
							<td ng-if="!$last" b2b-table-body>
				<div class="form-row">
	               		<label class="checkbox">
   	                	<input type="checkbox" ng-model="rowData.checked" ng-click="ecdapp.updateSelection(rowData.revision)" />
							<i class="skin"></i>
                		</label>
				</div>
					     	</td>
						</tr>
					</tbody>
				</table>
			</div> 
		</div>
	</div>

	<div class="b2b-modal-footer ng-scope ng-isolate-scope">
		<div class="cta-button-group in">
			<button class="btn btn-alt btn-small" type="button"
					ng-click="ecdapp.rollbackWorkflow(ecdapp.revision);" ng-show="!ecdapp.isDataLoading && !ecdapp.errMsg">
					Start Rollback
			</button>
			<button class="btn btn-alt btn-small" type="button"
					ng-click="$dismiss('cancel');">
				Close
			</button>
		</div>
	</div>

</script>

<script type="text/ng-template" id="inventory_deployment_upgrade_popup.html">

	<style>
	.ecd-parameter-table
	{
	    border:   1px;
    	overflow: auto;
	}
	.ecd-parameter-table th 
	{
		font-size: 1.4rem;
	}
	</style>

	<div class="b2b-modal-header ng-scope">
		<h2 id="myModalLabel" modal-title="">{{ecdapp.label}}</h2>
		<div class="corner-button in">
			<button type="button" class="close" aria-label="Close"
				ng-click="$dismiss('cancel')"></button>
		</div>
	</div>

	<div class="b2b-modal-body ng-scope ng-isolate-scope" tabindex="0"
		role="region" aria-label="Modal body content">

	 	<!-- show progress indicator -->
		<div ng-show="ecdapp.isDataLoading">
			<div class="span" style="margin-bottom:20px;">
    			<i class="icon-spinner small" role="img" aria-label="Please wait while the content loads"></i>
	    		Please wait while the content loads.
	    	</div>
		</div>

		<div ng-show="ecdapp.errMsg">
			<span class="ecd-error-message">{{ecdapp.errMsg}}</span>
		</div>
	
		<div ng-hide="ecdapp.errMsg">
			<div class="row-nowrap">
				<div class="span12">
					<label for="deploymentRef">Deployment Ref</label>
					<!--not editable-->
					<input id="deploymentRef" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.deploymentRef"/>
				</div>
				<div class="span12">
					<label for="serviceId">Service ID</label>
					<!--not editable-->
					<input id="serviceId" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.serviceId"/>
				</div> 
				<div class="span12">
					<label for="tenantName">Tenant Name</label>
					<!--not editable-->
					<input id="tenantName" class="span12" type="text" disabled="disabled" data-ng-model="ecdapp.ui_tenant"/>
				</div> 
			</div>			
			
			<div class="row-nowrap">
				<div class="span12">
					<div class="form-row">
						<label for="parameters">*Parameters</label>
	   					<div b2b-file-drop file-model="ecdapp.editRequest.fileModel" on-drop="handleFileSelect()" align="center">
	    						<span b2b-file-link file-model="ecdapp.editRequest.fileModel" on-file-select="handleFileSelect()" >
	    						Drag &amp; drop a parameters JSON file here, or click to browse.
	   							</span>
				        </div>
		        	</div>
		        	<div class="ecd-parameter-table">
						<table id="parameters">
							<tr id="ecd-table-header">
								<th width="40%">Name</th>
								<th width="60%">Value</th>
							</tr>
							<tbody ng-repeat="(pkey, pval) in ecdapp.editRequest.resourceDefinitionChanges">
								<tr id="tr-rowData">
									<td ng-bind="pkey"/>
									<td>
									<input id="parameterValue" class="span12" type="text" 
										data-ng-model="ecdapp.editRequest.resourceDefinitionChanges[pkey]" autofocus/>
									</td>
								</tr>
							</tbody>
							<tbody ng-repeat="(pkey, pval) in ecdapp.editRequest.resourceConstants">
								<tr id="tr-rowData">
									<td ng-bind="pkey"/>
									<td ng-bind="pval"/>
								</tr>
							</tbody>			
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- show progress indicator -->
	<div style="width: 100%;">
		<div ng-show="ecdapp.updatingDeployment" style="display: table; margin: 0 auto;" class="span">
    		<i class="icon-spinner small" role="img" aria-label="Update Deployment in Progress..."></i>
	   		Update Deployment in Progress...
	   	</div>
	</div>

	<div class="b2b-modal-footer ng-scope ng-isolate-scope" ng-show="!ecdapp.updatingDeployment">
		<div class="cta-button-group in">
			<!--<div ng-show="!ecdapp.isDataLoading">-->
				<button class="btn btn-alt btn-small" type="button"
						ng-click="ecdapp.upgradeWorkflow(ecdapp.editRequest.resourceDefinitionChanges);" ng-show="!ecdapp.isDataLoading && !ecdapp.errMsg">
					Start Upgrade
				</button>
			<!--</div>-->
			<button class="btn btn-small" type="button"
				ng-click="$dismiss('cancel')">
				Cancel
			</button>
		</div>
	</div>
</script>
